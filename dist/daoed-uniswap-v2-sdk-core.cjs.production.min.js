"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var e,r,n=t(require("jsbi")),o=t(require("tiny-invariant")),i=t(require("decimal.js-light")),u=t(require("big.js")),a=t(require("toformat")),s=require("@ethersproject/bignumber"),c=require("@ethersproject/address"),p=require("@ethersproject/solidity"),l={NODE_ENV:"production",NETWORK:process.env.NETWORK||"mainnet",FACTORY_ADDRESS:process.env.FACTORY_ADDRESS,ROUTER_ADDRESS:process.env.ROUTER_ADDRESS,CHAIN_ID:process.env.CHAIN_ID?parseInt(process.env.CHAIN_ID):1},f={1:"0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f",3:"0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f",11155111:"0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f"},h={1:"0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D",3:"0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D",11155111:"0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D"};l.FACTORY_ADDRESS&&l.CHAIN_ID&&(f[l.CHAIN_ID]=l.FACTORY_ADDRESS),l.ROUTER_ADDRESS&&l.CHAIN_ID&&(h[l.CHAIN_ID]=l.ROUTER_ADDRESS),(e=exports.TradeType||(exports.TradeType={}))[e.EXACT_INPUT=0]="EXACT_INPUT",e[e.EXACT_OUTPUT=1]="EXACT_OUTPUT",(r=exports.Rounding||(exports.Rounding={}))[r.ROUND_DOWN=0]="ROUND_DOWN",r[r.ROUND_HALF_UP=1]="ROUND_HALF_UP",r[r.ROUND_UP=2]="ROUND_UP";var d,m,v=n.BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),y=f,g="0x96e8ac4277198ff8b6f785478aa9a39f403cb768dd02cbee326c3e7da348845f",T=n.BigInt(1e3),A=n.BigInt(0),I=n.BigInt(1),w=n.BigInt(5),x=n.BigInt(997),P=n.BigInt(1e3),q=n.BigInt(1e4);function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function k(t,e,r,n,o,i,u){try{var a=t[i](u),s=a.value}catch(t){return void r(t)}a.done?e(s):Promise.resolve(s).then(n,o)}function b(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function u(t){k(i,n,o,u,a,"next",t)}function a(t){k(i,n,o,u,a,"throw",t)}u(void 0)}))}}function O(t,e,r){if(F())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var o=new(t.bind.apply(t,n));return r&&U(o,r.prototype),o}function B(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,L(n.key),n)}}function S(t,e,r){return e&&B(t.prototype,e),r&&B(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function R(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return E(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function C(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,U(t,e)}function F(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(F=function(){return!!t})()}function _(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var s=Object.create((n&&n.prototype instanceof a?n:a).prototype);return D(s,"_invoke",function(r,n,o){var i,a,s,c=0,p=o||[],l=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,r){return i=e,a=0,s=t,f.n=r,u}};function h(r,n){for(a=r,s=n,e=0;!l&&c&&!o&&e<p.length;e++){var o,i=p[e],h=f.p,d=i[2];r>3?(o=d===n)&&(s=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=r<2&&h<i[1])?(a=0,f.v=n,f.n=i[1]):h<d&&(o=r<3||i[0]>n||n>d)&&(i[4]=r,i[5]=n,f.n=d,a=0))}if(o||r>1)return u;throw l=!0,n}return function(o,p,d){if(c>1)throw TypeError("Generator is already running");for(l&&1===p&&h(p,d),a=p,s=d;(e=a<2?t:s)||!l;){i||(a?a<3?(a>1&&(f.n=-1),h(a,s)):f.n=s:f.v=s);try{if(c=2,i){if(a||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,a<2&&(a=0)}else 1===a&&(e=i.return)&&e.call(i),a<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((e=(l=f.n<0)?s:r.call(n,f))!==u)break}catch(e){i=t,a=1,s=e}finally{c=1}}return{value:e,done:l}}}(r,o,i),!0),s}var u={};function a(){}function s(){}function c(){}e=Object.getPrototypeOf;var p=[][n]?e(e([][n]())):(D(e={},n,(function(){return this})),e),l=c.prototype=a.prototype=Object.create(p);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,D(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return s.prototype=c,D(l,"constructor",c),D(c,"constructor",s),s.displayName="GeneratorFunction",D(c,o,"GeneratorFunction"),D(l),D(l,o,"Generator"),D(l,n,(function(){return this})),D(l,"toString",(function(){return"[object Generator]"})),(_=function(){return{w:i,m:f}})()}function D(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(D=function(t,e,r,n){function i(e,r){D(t,e,(function(t){return this._invoke(e,r,t)}))}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))})(t,e,r,n)}function U(t,e){return(U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function L(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}function j(t){var e="function"==typeof Map?new Map:void 0;return(j=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return O(t,arguments,N(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),U(r,t)})(t)}var H=a(i),M=a(u),W=((d={})[exports.Rounding.ROUND_DOWN]=H.ROUND_DOWN,d[exports.Rounding.ROUND_HALF_UP]=H.ROUND_HALF_UP,d[exports.Rounding.ROUND_UP]=H.ROUND_UP,d),X=((m={})[exports.Rounding.ROUND_DOWN]=0,m[exports.Rounding.ROUND_HALF_UP]=1,m[exports.Rounding.ROUND_UP]=3,m),V=function(){function t(t,e){void 0===e&&(e=n.BigInt(1)),this.numerator=n.BigInt(t),this.denominator=n.BigInt(e)}t.tryParseFraction=function(e){if(e instanceof n||"number"==typeof e||"string"==typeof e)return new t(e);if("numerator"in e&&"denominator"in e)return e;throw new Error("Could not parse fraction")};var e=t.prototype;return e.invert=function(){return new t(this.denominator,this.numerator)},e.add=function(e){var r=t.tryParseFraction(e);return n.equal(this.denominator,r.denominator)?new t(n.add(this.numerator,r.numerator),this.denominator):new t(n.add(n.multiply(this.numerator,r.denominator),n.multiply(r.numerator,this.denominator)),n.multiply(this.denominator,r.denominator))},e.subtract=function(e){var r=t.tryParseFraction(e);return n.equal(this.denominator,r.denominator)?new t(n.subtract(this.numerator,r.numerator),this.denominator):new t(n.subtract(n.multiply(this.numerator,r.denominator),n.multiply(r.numerator,this.denominator)),n.multiply(this.denominator,r.denominator))},e.lessThan=function(e){var r=t.tryParseFraction(e);return n.lessThan(n.multiply(this.numerator,r.denominator),n.multiply(r.numerator,this.denominator))},e.equalTo=function(e){var r=t.tryParseFraction(e);return n.equal(n.multiply(this.numerator,r.denominator),n.multiply(r.numerator,this.denominator))},e.greaterThan=function(e){var r=t.tryParseFraction(e);return n.greaterThan(n.multiply(this.numerator,r.denominator),n.multiply(r.numerator,this.denominator))},e.multiply=function(e){var r=t.tryParseFraction(e);return new t(n.multiply(this.numerator,r.numerator),n.multiply(this.denominator,r.denominator))},e.divide=function(e){var r=t.tryParseFraction(e);return new t(n.multiply(this.numerator,r.denominator),n.multiply(this.denominator,r.numerator))},e.toSignificant=function(t,e,r){void 0===e&&(e={groupSeparator:""}),void 0===r&&(r=exports.Rounding.ROUND_HALF_UP),Number.isInteger(t)||o(!1),t>0||o(!1),H.set({precision:t+1,rounding:W[r]});var n=new H(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(t);return n.toFormat(n.decimalPlaces(),e)},e.toFixed=function(t,e,r){return void 0===e&&(e={groupSeparator:""}),void 0===r&&(r=exports.Rounding.ROUND_HALF_UP),Number.isInteger(t)||o(!1),t>=0||o(!1),M.DP=t,M.RM=X[r],new M(this.numerator.toString()).div(this.denominator.toString()).toFormat(t,e)},S(t,[{key:"quotient",get:function(){return n.divide(this.numerator,this.denominator)}},{key:"remainder",get:function(){return new t(n.remainder(this.numerator,this.denominator),this.denominator)}},{key:"asFraction",get:function(){return new t(this.numerator,this.denominator)}}])}(),G=new V(n.BigInt(100));function Y(t){return new K(t.numerator,t.denominator)}var z,K=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).isPercent=!0,e}C(e,t);var r=e.prototype;return r.add=function(e){return Y(t.prototype.add.call(this,e))},r.subtract=function(e){return Y(t.prototype.subtract.call(this,e))},r.multiply=function(e){return Y(t.prototype.multiply.call(this,e))},r.divide=function(e){return Y(t.prototype.divide.call(this,e))},r.toSignificant=function(e,r,n){return void 0===e&&(e=5),t.prototype.multiply.call(this,G).toSignificant(e,r,n)},r.toFixed=function(e,r,n){return void 0===e&&(e=2),t.prototype.multiply.call(this,G).toFixed(e,r,n)},e}(V),Z=new K(A),$=new K(I);(z=exports.ChainId||(exports.ChainId={}))[z.MAINNET=1]="MAINNET",z[z.ROPSTEN=3]="ROPSTEN",z[z.SEPOLIA=11155111]="SEPOLIA",z[z.BASE=8453]="BASE";var Q=[exports.ChainId.MAINNET,exports.ChainId.ROPSTEN,exports.ChainId.SEPOLIA,exports.ChainId.BASE];(exports.NativeCurrencyName||(exports.NativeCurrencyName={})).ETHER="ETH";var J=a(u),tt=function(t){function e(e,r,i){var u;return u=t.call(this,r,i)||this,n.lessThanOrEqual(u.quotient,v)||o(!1),u.currency=e,u.decimalScale=n.exponentiate(n.BigInt(10),n.BigInt(e.decimals)),u}C(e,t),e.fromRawAmount=function(t,r){return new e(t,r)},e.fromFractionalAmount=function(t,r,n){return new e(t,r,n)};var r=e.prototype;return r.add=function(r){this.currency.equals(r.currency)||o(!1);var n=t.prototype.add.call(this,r);return e.fromFractionalAmount(this.currency,n.numerator,n.denominator)},r.subtract=function(r){this.currency.equals(r.currency)||o(!1);var n=t.prototype.subtract.call(this,r);return e.fromFractionalAmount(this.currency,n.numerator,n.denominator)},r.multiply=function(r){var n=t.prototype.multiply.call(this,r);return e.fromFractionalAmount(this.currency,n.numerator,n.denominator)},r.divide=function(r){var n=t.prototype.divide.call(this,r);return e.fromFractionalAmount(this.currency,n.numerator,n.denominator)},r.toSignificant=function(e,r,n){return void 0===e&&(e=6),void 0===n&&(n=exports.Rounding.ROUND_DOWN),t.prototype.divide.call(this,this.decimalScale).toSignificant(e,r,n)},r.toFixed=function(e,r,n){return void 0===e&&(e=this.currency.decimals),void 0===n&&(n=exports.Rounding.ROUND_DOWN),e<=this.currency.decimals||o(!1),t.prototype.divide.call(this,this.decimalScale).toFixed(e,r,n)},r.toExact=function(t){return void 0===t&&(t={groupSeparator:""}),J.DP=this.currency.decimals,new J(this.quotient.toString()).div(this.decimalScale.toString()).toFormat(t)},S(e,[{key:"wrapped",get:function(){return this.currency.isToken?this:e.fromFractionalAmount(this.currency.wrapped,this.numerator,this.denominator)}}])}(V),et=function(t){function e(){for(var e,r,o,i,u,a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];if(4===s.length)r=s[0],o=s[1],i=s[2],u=s[3];else{var p=s[0].quoteAmount.divide(s[0].baseAmount),l=[s[0].baseAmount.currency,s[0].quoteAmount.currency,p.denominator,p.numerator];r=l[0],o=l[1],i=l[2],u=l[3]}return(e=t.call(this,u,i)||this).baseCurrency=r,e.quoteCurrency=o,e.scalar=new V(n.exponentiate(n.BigInt(10),n.BigInt(r.decimals)),n.exponentiate(n.BigInt(10),n.BigInt(o.decimals))),e}C(e,t);var r=e.prototype;return r.invert=function(){return new e(this.quoteCurrency,this.baseCurrency,this.numerator,this.denominator)},r.multiply=function(r){this.quoteCurrency.equals(r.baseCurrency)||o(!1);var n=t.prototype.multiply.call(this,r);return new e(this.baseCurrency,r.quoteCurrency,n.denominator,n.numerator)},r.quote=function(e){e.currency.equals(this.baseCurrency)||o(!1);var r=t.prototype.multiply.call(this,e);return tt.fromFractionalAmount(this.quoteCurrency,r.numerator,r.denominator)},r.toSignificant=function(t,e,r){return void 0===t&&(t=6),this.adjustedForDecimals.toSignificant(t,e,r)},r.toFixed=function(t,e,r){return void 0===t&&(t=4),this.adjustedForDecimals.toFixed(t,e,r)},S(e,[{key:"adjustedForDecimals",get:function(){return t.prototype.multiply.call(this,this.scalar)}}])}(V),rt=function(t,e,r,n){Number.isSafeInteger(t)||o(!1),e>=0&&e<255&&Number.isInteger(e)||o(!1),this.chainId=t,this.decimals=e,this.symbol=r,this.name=n},nt=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).isNative=!0,e.isToken=!1,e}return C(e,t),e}(rt);function ot(t){try{return c.getAddress(t)}catch(e){throw new Error(t+" is not a valid address.")}}var it=/^0x[0-9a-fA-F]{40}$/;function ut(t){if(it.test(t))return t;throw new Error(t+" is not a valid address.")}var at,st=function(t){function e(e,r,n,i,u,a,c,p){var l;return(l=t.call(this,e,n,i,u)||this).isNative=!1,l.isToken=!0,l.address=a?ut(r):ot(r),c&&(c.gte(s.BigNumber.from(0))||o(!1)),p&&(p.gte(s.BigNumber.from(0))||o(!1)),l.buyFeeBps=c,l.sellFeeBps=p,l}C(e,t);var r=e.prototype;return r.equals=function(t){return t.isToken&&this.chainId===t.chainId&&this.address.toLowerCase()===t.address.toLowerCase()},r.sortsBefore=function(t){return this.chainId!==t.chainId&&o(!1),this.address.toLowerCase()===t.address.toLowerCase()&&o(!1),this.address.toLowerCase()<t.address.toLowerCase()},S(e,[{key:"wrapped",get:function(){return this}}])}(rt),ct=((at={})[exports.ChainId.MAINNET]=new st(exports.ChainId.MAINNET,"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",18,"WETH","Wrapped Ether"),at[exports.ChainId.ROPSTEN]=new st(exports.ChainId.ROPSTEN,"0xc778417E063141139Fce010982780140Aa0cD5Ab",18,"WETH","Wrapped Ether"),at[exports.ChainId.SEPOLIA]=new st(exports.ChainId.SEPOLIA,"0xfFf9976782d46CC05630D1f6eBAb18b2324d6B14",18,"WETH","Wrapped Ether"),at[exports.ChainId.BASE]=new st(exports.ChainId.BASE,"0x4200000000000000000000000000000000000006",18,"WETH","Wrapped Ether"),at),pt=function(t){function e(e){return t.call(this,e,18,"ETH","Ether")||this}return C(e,t),e.onChain=function(t){var r;return null!=(r=this._etherCache[t])?r:this._etherCache[t]=new e(t)},e.prototype.equals=function(t){return t.isNative&&t.chainId===this.chainId},S(e,[{key:"wrapped",get:function(){var t=ct[this.chainId];return t||o(!1),t}}])}(nt);pt._etherCache={};var lt=n.BigInt(Number.MAX_SAFE_INTEGER),ft=n.BigInt(0),ht=n.BigInt(1),dt=n.BigInt(2);function mt(t){if(n.greaterThanOrEqual(t,ft)||o(!1),n.lessThan(t,lt))return n.BigInt(Math.floor(Math.sqrt(n.toNumber(t))));var e,r;for(e=t,r=n.add(n.divide(t,dt),ht);n.lessThan(r,e);)e=r,r=n.divide(n.add(n.divide(t,r),r),dt);return e}var vt="setPrototypeOf"in Object,yt=function(t){function e(){var r;return(r=t.call(this)||this).isInsufficientReservesError=!0,r.name=r.constructor.name,vt&&Object.setPrototypeOf(r,(this instanceof e?this.constructor:void 0).prototype),r}return C(e,t),e}(j(Error)),gt=function(t){function e(){var r;return(r=t.call(this)||this).isInsufficientInputAmountError=!0,r.name=r.constructor.name,vt&&Object.setPrototypeOf(r,(this instanceof e?this.constructor:void 0).prototype),r}return C(e,t),e}(j(Error)),Tt=function(t){var e=t.factoryAddress,r=t.tokenA,n=t.tokenB,o=r.sortsBefore(n)?[r,n]:[n,r];return c.getCreate2Address(e,p.keccak256(["bytes"],[p.pack(["address","address"],[o[0].address,o[1].address])]),g)},At=function(){function t(e,r){var n=e.currency.sortsBefore(r.currency)?[e,r]:[r,e];this.liquidityToken=new st(n[0].currency.chainId,t.getAddress(n[0].currency,n[1].currency),18,"UNI-V2","Uniswap V2"),this.tokenAmounts=n}t.getAddress=function(t,e){var r=y[t.chainId];return r||o(!1),Tt({factoryAddress:r,tokenA:t,tokenB:e})};var e=t.prototype;return e.involvesToken=function(t){return t.equals(this.token0)||t.equals(this.token1)},e.priceOf=function(t){return this.involvesToken(t)||o(!1),t.equals(this.token0)?this.token0Price:this.token1Price},e.reserveOf=function(t){return this.involvesToken(t)||o(!1),t.equals(this.token0)?this.reserve0:this.reserve1},e.getOutputAmount=function(e,r){if(void 0===r&&(r=!0),this.involvesToken(e.currency)||o(!1),n.equal(this.reserve0.quotient,A)||n.equal(this.reserve1.quotient,A))throw new yt;var i=this.reserveOf(e.currency),u=this.reserveOf(e.currency.equals(this.token0)?this.token1:this.token0),a=r?this.derivePercentAfterSellFees(e):Z,s=a.greaterThan(Z)?tt.fromRawAmount(e.currency,a.multiply(e).quotient):e,c=n.multiply(s.quotient,x),p=n.multiply(c,u.quotient),l=n.add(n.multiply(i.quotient,P),c),f=tt.fromRawAmount(e.currency.equals(this.token0)?this.token1:this.token0,n.divide(p,l));if(n.equal(f.quotient,A))throw new gt;var h=r?this.derivePercentAfterBuyFees(f):Z,d=h.greaterThan(Z)?tt.fromRawAmount(f.currency,f.multiply(h).quotient):f;if(n.equal(d.quotient,A))throw new gt;return[d,new t(i.add(s),u.subtract(d))]},e.getInputAmount=function(e,r){void 0===r&&(r=!0),this.involvesToken(e.currency)||o(!1);var i=r?this.derivePercentAfterBuyFees(e):Z,u=i.greaterThan(Z)?tt.fromRawAmount(e.currency,n.add(e.divide(i).quotient,I)):e;if(n.equal(this.reserve0.quotient,A)||n.equal(this.reserve1.quotient,A)||n.greaterThanOrEqual(e.quotient,this.reserveOf(e.currency).quotient)||n.greaterThanOrEqual(u.quotient,this.reserveOf(e.currency).quotient))throw new yt;var a=this.reserveOf(e.currency),s=this.reserveOf(e.currency.equals(this.token0)?this.token1:this.token0),c=n.multiply(n.multiply(s.quotient,u.quotient),P),p=n.multiply(n.subtract(a.quotient,u.quotient),x),l=tt.fromRawAmount(e.currency.equals(this.token0)?this.token1:this.token0,n.add(n.divide(c,p),I)),f=r?this.derivePercentAfterSellFees(l):Z;return[f.greaterThan(Z)?tt.fromRawAmount(l.currency,n.add(l.divide(f).quotient,I)):l,new t(s.add(l),a.subtract(e))]},e.getLiquidityMinted=function(t,e,r){t.currency.equals(this.liquidityToken)||o(!1);var i,u=e.currency.sortsBefore(r.currency)?[e,r]:[r,e];if(u[0].currency.equals(this.token0)&&u[1].currency.equals(this.token1)||o(!1),n.equal(t.quotient,A))i=n.subtract(mt(n.multiply(u[0].quotient,u[1].quotient)),T);else{var a=n.divide(n.multiply(u[0].quotient,t.quotient),this.reserve0.quotient),s=n.divide(n.multiply(u[1].quotient,t.quotient),this.reserve1.quotient);i=n.lessThanOrEqual(a,s)?a:s}if(!n.greaterThan(i,A))throw new gt;return tt.fromRawAmount(this.liquidityToken,i)},e.getLiquidityValue=function(t,e,r,i,u){var a;if(void 0===i&&(i=!1),this.involvesToken(t)||o(!1),e.currency.equals(this.liquidityToken)||o(!1),r.currency.equals(this.liquidityToken)||o(!1),n.lessThanOrEqual(r.quotient,e.quotient)||o(!1),i){u||o(!1);var s=n.BigInt(u);if(n.equal(s,A))a=e;else{var c=mt(n.multiply(this.reserve0.quotient,this.reserve1.quotient)),p=mt(s);if(n.greaterThan(c,p)){var l=n.multiply(e.quotient,n.subtract(c,p)),f=n.add(n.multiply(c,w),p),h=n.divide(l,f);a=e.add(tt.fromRawAmount(this.liquidityToken,h))}else a=e}}else a=e;return tt.fromRawAmount(t,n.divide(n.multiply(r.quotient,this.reserveOf(t).quotient),a.quotient))},e.derivePercentAfterSellFees=function(t){var e=this.token0.wrapped.equals(t.wrapped.currency)?this.token0.wrapped.sellFeeBps:this.token1.wrapped.sellFeeBps;return null!=e&&e.gt(s.BigNumber.from(0))?$.subtract(new K(n.BigInt(e)).divide(q)):Z},e.derivePercentAfterBuyFees=function(t){var e=this.token0.wrapped.equals(t.wrapped.currency)?this.token0.wrapped.buyFeeBps:this.token1.wrapped.buyFeeBps;return null!=e&&e.gt(s.BigNumber.from(0))?$.subtract(new K(n.BigInt(e)).divide(q)):Z},S(t,[{key:"token0Price",get:function(){var t=this.tokenAmounts[1].divide(this.tokenAmounts[0]);return new et(this.token0,this.token1,t.denominator,t.numerator)}},{key:"token1Price",get:function(){var t=this.tokenAmounts[0].divide(this.tokenAmounts[1]);return new et(this.token1,this.token0,t.denominator,t.numerator)}},{key:"chainId",get:function(){return this.token0.chainId}},{key:"token0",get:function(){return this.tokenAmounts[0].currency}},{key:"token1",get:function(){return this.tokenAmounts[1].currency}},{key:"reserve0",get:function(){return this.tokenAmounts[0]}},{key:"reserve1",get:function(){return this.tokenAmounts[1]}}])}(),It=function(){return S((function(t,e,r){this._midPrice=null,t.length>0||o(!1);var n=t[0].chainId;t.every((function(t){return t.chainId===n}))||o(!1);var i=e.wrapped;t[0].involvesToken(i)||o(!1),void 0===r||t[t.length-1].involvesToken(r.wrapped)||o(!1);for(var u,a=[i],s=R(t.entries());!(u=s()).done;){var c=u.value,p=c[1],l=a[c[0]];l.equals(p.token0)||l.equals(p.token1)||o(!1);var f=l.equals(p.token0)?p.token1:p.token0;a.push(f)}this.pairs=t,this.path=a,this.input=e,this.output=r}),[{key:"midPrice",get:function(){if(null!==this._midPrice)return this._midPrice;for(var t,e=[],r=R(this.pairs.entries());!(t=r()).done;){var n=t.value,o=n[1];e.push(this.path[n[0]].equals(o.token0)?new et(o.reserve0.currency,o.reserve1.currency,o.reserve0.quotient,o.reserve1.quotient):new et(o.reserve1.currency,o.reserve0.currency,o.reserve1.quotient,o.reserve0.quotient))}var i=e.slice(1).reduce((function(t,e){return t.multiply(e)}),e[0]);return this._midPrice=new et(this.input,this.output,i.denominator,i.numerator)}},{key:"chainId",get:function(){return this.pairs[0].chainId}}])}();function wt(t,e,r){var n=t.quote(e),o=n.subtract(r).divide(n);return new K(o.numerator,o.denominator)}function xt(t,e,r,n){if(r>0||o(!1),t.length<=r||o(!1),0===t.length)return t.push(e),null;var i=t.length===r;if(i&&n(t[t.length-1],e)<=0)return e;for(var u=0,a=t.length;u<a;){var s=u+a>>>1;n(t[s],e)<=0?u=s+1:a=s}return t.splice(u,0,e),i?t.pop():null}function Pt(t,e){return t.inputAmount.currency.equals(e.inputAmount.currency)||o(!1),t.outputAmount.currency.equals(e.outputAmount.currency)||o(!1),t.outputAmount.equalTo(e.outputAmount)?t.inputAmount.equalTo(e.inputAmount)?0:t.inputAmount.lessThan(e.inputAmount)?-1:1:t.outputAmount.lessThan(e.outputAmount)?1:-1}function qt(t,e){var r=Pt(t,e);return 0!==r?r:t.priceImpact.lessThan(e.priceImpact)?-1:t.priceImpact.greaterThan(e.priceImpact)?1:t.route.path.length-e.route.path.length}var Et=function(){function t(t,e,r){this.route=t,this.tradeType=r;var n=new Array(t.path.length);if(r===exports.TradeType.EXACT_INPUT){e.currency.equals(t.input)||o(!1),n[0]=e.wrapped;for(var i=0;i<t.path.length-1;i++){var u=t.pairs[i].getOutputAmount(n[i]);n[i+1]=u[0]}this.inputAmount=tt.fromFractionalAmount(t.input,e.numerator,e.denominator),this.outputAmount=tt.fromFractionalAmount(t.output,n[n.length-1].numerator,n[n.length-1].denominator)}else{e.currency.equals(t.output)||o(!1),n[n.length-1]=e.wrapped;for(var a=t.path.length-1;a>0;a--){var s=t.pairs[a-1].getInputAmount(n[a]);n[a-1]=s[0]}this.inputAmount=tt.fromFractionalAmount(t.input,n[0].numerator,n[0].denominator),this.outputAmount=tt.fromFractionalAmount(t.output,e.numerator,e.denominator)}this.executionPrice=new et(this.inputAmount.currency,this.outputAmount.currency,this.inputAmount.quotient,this.outputAmount.quotient),this.priceImpact=wt(t.midPrice,this.inputAmount,this.outputAmount)}t.exactIn=function(e,r){return new t(e,r,exports.TradeType.EXACT_INPUT)},t.exactOut=function(e,r){return new t(e,r,exports.TradeType.EXACT_OUTPUT)};var e=t.prototype;return e.minimumAmountOut=function(t){if(t.lessThan(A)&&o(!1),this.tradeType===exports.TradeType.EXACT_OUTPUT)return this.outputAmount;var e=new V(I).add(t).invert().multiply(this.outputAmount.quotient).quotient;return tt.fromRawAmount(this.outputAmount.currency,e)},e.maximumAmountIn=function(t){if(t.lessThan(A)&&o(!1),this.tradeType===exports.TradeType.EXACT_INPUT)return this.inputAmount;var e=new V(I).add(t).multiply(this.inputAmount.quotient).quotient;return tt.fromRawAmount(this.inputAmount.currency,e)},t.bestTradeExactIn=function(e,r,n,i,u,a,s){var c=void 0===i?{}:i,p=c.maxNumResults,l=void 0===p?3:p,f=c.maxHops,h=void 0===f?3:f;void 0===u&&(u=[]),void 0===a&&(a=r),void 0===s&&(s=[]),e.length>0||o(!1),h>0||o(!1),r===a||u.length>0||o(!1);for(var d=a.wrapped,m=n.wrapped,v=0;v<e.length;v++){var y=e[v];if((y.token0.equals(d.currency)||y.token1.equals(d.currency))&&!y.reserve0.equalTo(A)&&!y.reserve1.equalTo(A)){var g=void 0;try{g=y.getOutputAmount(d)[0]}catch(t){if(t.isInsufficientInputAmountError)continue;throw t}if(g.currency.equals(m))xt(s,new t(new It([].concat(u,[y]),r.currency,n),r,exports.TradeType.EXACT_INPUT),l,qt);else if(h>1&&e.length>1){var T=e.slice(0,v).concat(e.slice(v+1,e.length));t.bestTradeExactIn(T,r,n,{maxNumResults:l,maxHops:h-1},[].concat(u,[y]),g,s)}}}return s},e.worstExecutionPrice=function(t){return new et(this.inputAmount.currency,this.outputAmount.currency,this.maximumAmountIn(t).quotient,this.minimumAmountOut(t).quotient)},t.bestTradeExactOut=function(e,r,n,i,u,a,s){var c=void 0===i?{}:i,p=c.maxNumResults,l=void 0===p?3:p,f=c.maxHops,h=void 0===f?3:f;void 0===u&&(u=[]),void 0===a&&(a=n),void 0===s&&(s=[]),e.length>0||o(!1),h>0||o(!1),n===a||u.length>0||o(!1);for(var d=a.wrapped,m=r.wrapped,v=0;v<e.length;v++){var y=e[v];if((y.token0.equals(d.currency)||y.token1.equals(d.currency))&&!y.reserve0.equalTo(A)&&!y.reserve1.equalTo(A)){var g=void 0;try{g=y.getInputAmount(d)[0]}catch(t){if(t.isInsufficientReservesError)continue;throw t}if(g.currency.equals(m))xt(s,new t(new It([y].concat(u),r,n.currency),n,exports.TradeType.EXACT_OUTPUT),l,qt);else if(h>1&&e.length>1){var T=e.slice(0,v).concat(e.slice(v+1,e.length));t.bestTradeExactOut(T,r,n,{maxNumResults:l,maxHops:h-1},[y].concat(u),g,s)}}}return s},t}();function kt(t,e){t===e&&o(!1);var r=t.toLowerCase()<e.toLowerCase()?[t,e]:[e,t],n=r[0],i=r[1];return"0x0000000000000000000000000000000000000000"===n.toLowerCase()&&o(!1),[n,i]}function bt(t,e,r){n.greaterThan(t,n.BigInt(0))||o(!1),n.greaterThan(e,n.BigInt(0))&&n.greaterThan(r,n.BigInt(0))||o(!1);var i=n.multiply(t,n.BigInt(997)),u=n.multiply(i,r),a=n.add(n.multiply(e,n.BigInt(1e3)),i);return n.divide(u,a)}function Ot(t,e,r){n.greaterThan(t,n.BigInt(0))||o(!1),n.greaterThan(e,n.BigInt(0))&&n.greaterThan(r,n.BigInt(0))||o(!1);var i=n.multiply(n.multiply(e,t),n.BigInt(1e3)),u=n.multiply(n.subtract(r,t),n.BigInt(997));return n.add(n.divide(i,u),n.BigInt(1))}function Bt(t,e,r,i){n.greaterThan(t,n.BigInt(0))&&n.greaterThan(e,n.BigInt(0))||o(!1),n.greaterThan(r,n.BigInt(0))&&n.greaterThan(i,n.BigInt(0))||o(!1);var u=n.divide(n.multiply(i,t),r),a=n.greaterThan(u,e);if(n.equal(u,e))return[!1,n.BigInt(0)];var s=n.multiply(r,i);try{var c=mt(n.divide(n.multiply(n.multiply(s,n.BigInt(1e3)),a?t:e),n.multiply(a?e:t,n.BigInt(997)))),p=n.divide(n.multiply(a?r:i,n.BigInt(1e3)),n.BigInt(997));return n.lessThan(c,p)?[!1,n.BigInt(0)]:[a,n.subtract(c,p)]}catch(t){return[!1,n.BigInt(0)]}}function St(t,e,r,i){n.greaterThan(t,n.BigInt(0))&&n.greaterThan(e,n.BigInt(0))||o(!1);var u=Bt(r,i,t,e),a=u[0],s=u[1];if(n.equal(s,n.BigInt(0)))return[t,e];if(a){var c=bt(s,t,e);return[n.add(t,s),n.subtract(e,c)]}var p=bt(s,e,t);return[n.subtract(t,p),n.add(e,s)]}function Rt(t,e,r,o,i,u){var a=r;if(i&&n.greaterThan(u,n.BigInt(0))){var s=mt(n.multiply(t,e)),c=mt(u);if(n.greaterThan(s,c)){var p=r,l=n.subtract(s,c),f=n.add(n.multiply(s,n.BigInt(5)),c),h=n.divide(n.multiply(p,l),f);a=n.add(r,h)}}return[n.divide(n.multiply(t,o),a),n.divide(n.multiply(e,o),a)]}var Nt=function(){function t(){this.userPools=new Map,this.userBalances=new Map,this.poolData=new Map}var e=t.prototype;return e.addMockUserPosition=function(t,e,r){t=ut(t),e=ut(e),this.userPools.has(t)||this.userPools.set(t,new Set),this.userPools.get(t).add(e),this.userBalances.has(t)||this.userBalances.set(t,new Map),this.userBalances.get(t).set(e,r)},e.addMockPoolData=function(t,e,r,n,o,i){this.poolData.set(ut(t),{tokenA:ut(e),tokenB:ut(r),reserveA:n,reserveB:o,totalSupply:i})},e.getUserLPPoolCount=function(){var t=b(_().m((function t(e){var r;return _().w((function(t){for(;;)switch(t.n){case 0:return e=ut(e),r=this.userPools.get(e),t.a(2,n.BigInt(r?r.size:0))}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getUserLPPools=function(){var t=b(_().m((function t(e,r,o){var i,u,a,s,c;return _().w((function(t){for(;;)switch(t.n){case 0:if(e=ut(e),i=this.userPools.get(e)){t.n=1;break}return t.a(2,{pools:[],hasMore:!1});case 1:return u=Array.from(i),a=n.toNumber(r),s=n.toNumber(o),c=u.slice(a,a+s),t.a(2,{pools:c,hasMore:a+s<u.length})}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),e.getUserLPBalance=function(){var t=b(_().m((function t(e,r){var o;return _().w((function(t){for(;;)switch(t.n){case 0:if(e=ut(e),r=ut(r),o=this.userBalances.get(e)){t.n=1;break}return t.a(2,n.BigInt(0));case 1:return t.a(2,o.get(r)||n.BigInt(0))}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.getUserLPPositions=function(){var t=b(_().m((function t(e,r,o){var i,u,a,s,c,p,l,f;return _().w((function(t){for(;;)switch(t.n){case 0:return e=ut(e),t.n=1,this.getUserLPPools(e,r,o);case 1:u=[],a=R((i=t.v).pools);case 2:if((s=a()).done){t.n=6;break}return c=s.value,t.n=3,this.getUserLPBalance(e,c);case 3:return p=t.v,t.n=4,this.getPoolInfo(c);case 4:f=n.equal((l=t.v).totalSupply,n.BigInt(0))?n.BigInt(0):n.divide(n.multiply(p,n.BigInt(1e4)),l.totalSupply),u.push({pool:c,tokenA:l.tokenA,tokenB:l.tokenB,balance:p,reserveA:l.reserveA,reserveB:l.reserveB,totalSupply:l.totalSupply,sharePercentage:f});case 5:t.n=2;break;case 6:return t.a(2,{positions:u,hasMore:i.hasMore})}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),e.hasLPPosition=function(){var t=b(_().m((function t(e,r){return _().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,this.getUserLPBalance(e,r);case 1:return t.a(2,n.greaterThan(t.v,n.BigInt(0)))}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.getPoolInfo=function(){var t=b(_().m((function t(e){var r;return _().w((function(t){for(;;)switch(t.n){case 0:if(e=ut(e),r=this.poolData.get(e)){t.n=1;break}throw new Error("Pool data not found for "+e);case 1:return t.a(2,r)}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),t}(),Ct=function(){function t(t){this.dataProvider=t}var e=t.prototype;return e.getUserLPPoolCount=function(){var t=b(_().m((function t(e){return _().w((function(t){for(;;)switch(t.n){case 0:return t.a(2,this.dataProvider.getUserLPPoolCount(e))}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getUserLPPools=function(){var t=b(_().m((function t(e,r,i){return _().w((function(t){for(;;)switch(t.n){case 0:return n.greaterThanOrEqual(r,n.BigInt(0))||o(!1),n.greaterThan(i,n.BigInt(0))||o(!1),t.a(2,this.dataProvider.getUserLPPools(e,r,i))}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),e.getUserLPBalance=function(){var t=b(_().m((function t(e,r){return _().w((function(t){for(;;)switch(t.n){case 0:return t.a(2,this.dataProvider.getUserLPBalance(e,r))}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.getUserLPPositions=function(){var t=b(_().m((function t(e,r,i){return _().w((function(t){for(;;)switch(t.n){case 0:return n.greaterThanOrEqual(r,n.BigInt(0))||o(!1),n.greaterThan(i,n.BigInt(0))||o(!1),t.a(2,this.dataProvider.getUserLPPositions(e,r,i))}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),e.hasLPPosition=function(){var t=b(_().m((function t(e,r){return _().w((function(t){for(;;)switch(t.n){case 0:return t.a(2,this.dataProvider.hasLPPosition(e,r))}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.getAllUserLPPositions=function(){var t=b(_().m((function t(e){var r,o,i,u;return _().w((function(t){for(;;)switch(t.n){case 0:r=[],o=n.BigInt(0),i=n.BigInt(50);case 1:return t.n=2,this.getUserLPPositions(e,o,i);case 2:if(r.push.apply(r,(u=t.v).positions),u.hasMore){t.n=3;break}return t.a(3,4);case 3:o=n.add(o,i),t.n=1;break;case 4:return t.a(2,r)}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getUserTotalLPValue=function(){var t=b(_().m((function t(e){var r,n;return _().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,this.getAllUserLPPositions(e);case 1:return r=t.v,n=new Set(r.map((function(t){return t.pool}))),t.a(2,{totalPositions:r.length,totalPools:n.size})}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),t}();function Ft(t){return"0x"+t.quotient.toString(16)}var _t=function(){function t(){}return t.swapCallParameters=function(t,e){var r=t.inputAmount.currency.isNative,n=t.outputAmount.currency.isNative;r&&n&&o(!1),!("ttl"in e)||e.ttl>0||o(!1);var i,u,a,s=ot(e.recipient),c=Ft(t.maximumAmountIn(e.allowedSlippage)),p=Ft(t.minimumAmountOut(e.allowedSlippage)),l=t.route.path.map((function(t){return t.address})),f="ttl"in e?"0x"+(Math.floor((new Date).getTime()/1e3)+e.ttl).toString(16):"0x"+e.deadline.toString(16),h=Boolean(e.feeOnTransfer);switch(t.tradeType){case exports.TradeType.EXACT_INPUT:r?(i=h?"swapExactETHForTokensSupportingFeeOnTransferTokens":"swapExactETHForTokens",u=[p,l,s,f],a=c):n?(i=h?"swapExactTokensForETHSupportingFeeOnTransferTokens":"swapExactTokensForETH",u=[c,p,l,s,f],a="0x0"):(i=h?"swapExactTokensForTokensSupportingFeeOnTransferTokens":"swapExactTokensForTokens",u=[c,p,l,s,f],a="0x0");break;case exports.TradeType.EXACT_OUTPUT:h&&o(!1),r?(i="swapETHForExactTokens",u=[p,l,s,f],a=c):n?(i="swapTokensForExactETH",u=[p,c,l,s,f],a="0x0"):(i="swapTokensForExactTokens",u=[p,c,l,s,f],a="0x0")}return{methodName:i,args:u,value:a}},t}();exports.BASIS_POINTS=q,exports.CurrencyAmount=tt,exports.Ether=pt,exports.FACTORY_ADDRESSES=f,exports.FACTORY_ADDRESS_MAP=y,exports.FIVE=w,exports.Fraction=V,exports.INIT_CODE_HASH=g,exports.InsufficientInputAmountError=gt,exports.InsufficientReservesError=yt,exports.LPPositionTracker=Ct,exports.MINIMUM_LIQUIDITY=T,exports.MaxUint256=v,exports.MockLPDataProvider=Nt,exports.NativeCurrency=nt,exports.ONE=I,exports.ONE_HUNDRED_PERCENT=$,exports.Pair=At,exports.Percent=K,exports.Price=et,exports.ROUTER_ADDRESSES=h,exports.Route=It,exports.Router=_t,exports.SUPPORTED_CHAINS=Q,exports.Token=st,exports.Trade=Et,exports.WETH9=ct,exports.ZERO=A,exports.ZERO_PERCENT=Z,exports._1000=P,exports._997=x,exports.computeLiquidityValue=Rt,exports.computePairAddress=Tt,exports.computePriceImpact=wt,exports.computeProfitMaximizingTrade=Bt,exports.getAmountIn=Ot,exports.getAmountOut=bt,exports.getAmountsIn=function(t,e){e.length>=1||o(!1);var r=new Array(e.length+1);r[r.length-1]=t;for(var n=e.length-1;n>=0;n--)r[n]=Ot(r[n+1],e[n][0],e[n][1]);return r},exports.getAmountsOut=function(t,e){e.length>=1||o(!1);var r=new Array(e.length+1);r[0]=t;for(var n=0;n<e.length;n++)r[n+1]=bt(r[n],e[n][0],e[n][1]);return r},exports.getFactoryAddress=function(t){return f[t]},exports.getLiquidityValue=function(t,e){return Rt(t.reserveA,t.reserveB,t.totalSupply,e,t.feeOn,t.kLast)},exports.getLiquidityValueAfterArbitrageToPrice=function(t,e,r,i){n.greaterThanOrEqual(t.totalSupply,i)&&n.greaterThan(i,n.BigInt(0))||o(!1);var u=St(t.reserveA,t.reserveB,e,r);return Rt(u[0],u[1],t.totalSupply,i,t.feeOn,t.kLast)},exports.getReservesAfterArbitrage=St,exports.getRouterAddress=function(t){return h[t]},exports.inputOutputComparator=Pt,exports.pairFor=function(t,e,r,n){var o=kt(e,r);return"0x"+(t+o[0]+o[1]+n).slice(-40).padStart(40,"0")},exports.quote=function(t,e,r){return n.greaterThan(t,n.BigInt(0))||o(!1),n.greaterThan(e,n.BigInt(0))&&n.greaterThan(r,n.BigInt(0))||o(!1),n.divide(n.multiply(t,r),e)},exports.setFactoryAddress=function(t,e){f[t]=e},exports.setRouterAddress=function(t,e){h[t]=e},exports.sortTokens=kt,exports.sortedInsert=xt,exports.sqrt=mt,exports.tradeComparator=qt,exports.validateAndParseAddress=ot;
//# sourceMappingURL=daoed-uniswap-v2-sdk-core.cjs.production.min.js.map
