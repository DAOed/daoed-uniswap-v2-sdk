"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var e,r=t(require("jsbi")),n=t(require("tiny-invariant")),o=t(require("decimal.js-light")),i=t(require("big.js")),u=t(require("toformat")),a=require("@ethersproject/bignumber"),s=require("@ethersproject/address"),c=require("@ethersproject/solidity"),l={SEPOLIA_FACTORY_ADDRESS:String(process.env.SEPOLIA_FACTORY_ADDRESS),SEPOLIA_ROUTER_ADDRESS:String(process.env.SEPOLIA_ROUTER_ADDRESS),SEPOLIA_CHAIN_ID:Number(process.env.SEPOLIA_CHAIN_ID)};(e=exports.ChainId||(exports.ChainId={}))[e.SEPOLIA=11155111]="SEPOLIA";var p,f,h=[exports.ChainId.SEPOLIA];(exports.NativeCurrencyName||(exports.NativeCurrencyName={})).ETHER="ETH";var d,m,v=((p={})[exports.ChainId.SEPOLIA]=l.SEPOLIA_FACTORY_ADDRESS,p),y=((f={})[exports.ChainId.SEPOLIA]=l.SEPOLIA_ROUTER_ADDRESS,f);(d=exports.TradeType||(exports.TradeType={}))[d.EXACT_INPUT=0]="EXACT_INPUT",d[d.EXACT_OUTPUT=1]="EXACT_OUTPUT",(m=exports.Rounding||(exports.Rounding={}))[m.ROUND_DOWN=0]="ROUND_DOWN",m[m.ROUND_HALF_UP=1]="ROUND_HALF_UP",m[m.ROUND_UP=2]="ROUND_UP";var g,T,A=r.BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),w=v,I="0x96e8ac4277198ff8b6f785478aa9a39f403cb768dd02cbee326c3e7da348845f",P=r.BigInt(1e3),q=r.BigInt(0),x=r.BigInt(1),k=r.BigInt(5),O=r.BigInt(997),b=r.BigInt(1e3),E=r.BigInt(1e4);function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function S(t,e,r,n,o,i,u){try{var a=t[i](u),s=a.value}catch(t){return void r(t)}a.done?e(s):Promise.resolve(s).then(n,o)}function _(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function u(t){S(i,n,o,u,a,"next",t)}function a(t){S(i,n,o,u,a,"throw",t)}u(void 0)}))}}function R(t,e,r){if(L())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var o=new(t.bind.apply(t,n));return r&&M(o,r.prototype),o}function U(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,X(n.key),n)}}function F(t,e,r){return e&&U(t.prototype,e),r&&U(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function N(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return B(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?B(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function D(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,M(t,e)}function L(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(L=function(){return!!t})()}function j(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var s=Object.create((n&&n.prototype instanceof a?n:a).prototype);return H(s,"_invoke",function(r,n,o){var i,a,s,c=0,l=o||[],p=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,r){return i=e,a=0,s=t,f.n=r,u}};function h(r,n){for(a=r,s=n,e=0;!p&&c&&!o&&e<l.length;e++){var o,i=l[e],h=f.p,d=i[2];r>3?(o=d===n)&&(s=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=r<2&&h<i[1])?(a=0,f.v=n,f.n=i[1]):h<d&&(o=r<3||i[0]>n||n>d)&&(i[4]=r,i[5]=n,f.n=d,a=0))}if(o||r>1)return u;throw p=!0,n}return function(o,l,d){if(c>1)throw TypeError("Generator is already running");for(p&&1===l&&h(l,d),a=l,s=d;(e=a<2?t:s)||!p;){i||(a?a<3?(a>1&&(f.n=-1),h(a,s)):f.n=s:f.v=s);try{if(c=2,i){if(a||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,a<2&&(a=0)}else 1===a&&(e=i.return)&&e.call(i),a<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((e=(p=f.n<0)?s:r.call(n,f))!==u)break}catch(e){i=t,a=1,s=e}finally{c=1}}return{value:e,done:p}}}(r,o,i),!0),s}var u={};function a(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][n]?e(e([][n]())):(H(e={},n,(function(){return this})),e),p=c.prototype=a.prototype=Object.create(l);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,H(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return s.prototype=c,H(p,"constructor",c),H(c,"constructor",s),s.displayName="GeneratorFunction",H(c,o,"GeneratorFunction"),H(p),H(p,o,"Generator"),H(p,n,(function(){return this})),H(p,"toString",(function(){return"[object Generator]"})),(j=function(){return{w:i,m:f}})()}function H(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(H=function(t,e,r,n){function i(e,r){H(t,e,(function(t){return this._invoke(e,r,t)}))}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))})(t,e,r,n)}function M(t,e){return(M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function X(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}function W(t){var e="function"==typeof Map?new Map:void 0;return(W=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return R(t,arguments,C(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),M(r,t)})(t)}var V=u(o),G=u(i),Y=((g={})[exports.Rounding.ROUND_DOWN]=V.ROUND_DOWN,g[exports.Rounding.ROUND_HALF_UP]=V.ROUND_HALF_UP,g[exports.Rounding.ROUND_UP]=V.ROUND_UP,g),z=((T={})[exports.Rounding.ROUND_DOWN]=0,T[exports.Rounding.ROUND_HALF_UP]=1,T[exports.Rounding.ROUND_UP]=3,T),Z=function(){function t(t,e){void 0===e&&(e=r.BigInt(1)),this.numerator=r.BigInt(t),this.denominator=r.BigInt(e)}t.tryParseFraction=function(e){if(e instanceof r||"number"==typeof e||"string"==typeof e)return new t(e);if("numerator"in e&&"denominator"in e)return e;throw new Error("Could not parse fraction")};var e=t.prototype;return e.invert=function(){return new t(this.denominator,this.numerator)},e.add=function(e){var n=t.tryParseFraction(e);return r.equal(this.denominator,n.denominator)?new t(r.add(this.numerator,n.numerator),this.denominator):new t(r.add(r.multiply(this.numerator,n.denominator),r.multiply(n.numerator,this.denominator)),r.multiply(this.denominator,n.denominator))},e.subtract=function(e){var n=t.tryParseFraction(e);return r.equal(this.denominator,n.denominator)?new t(r.subtract(this.numerator,n.numerator),this.denominator):new t(r.subtract(r.multiply(this.numerator,n.denominator),r.multiply(n.numerator,this.denominator)),r.multiply(this.denominator,n.denominator))},e.lessThan=function(e){var n=t.tryParseFraction(e);return r.lessThan(r.multiply(this.numerator,n.denominator),r.multiply(n.numerator,this.denominator))},e.equalTo=function(e){var n=t.tryParseFraction(e);return r.equal(r.multiply(this.numerator,n.denominator),r.multiply(n.numerator,this.denominator))},e.greaterThan=function(e){var n=t.tryParseFraction(e);return r.greaterThan(r.multiply(this.numerator,n.denominator),r.multiply(n.numerator,this.denominator))},e.multiply=function(e){var n=t.tryParseFraction(e);return new t(r.multiply(this.numerator,n.numerator),r.multiply(this.denominator,n.denominator))},e.divide=function(e){var n=t.tryParseFraction(e);return new t(r.multiply(this.numerator,n.denominator),r.multiply(this.denominator,n.numerator))},e.toSignificant=function(t,e,r){void 0===e&&(e={groupSeparator:""}),void 0===r&&(r=exports.Rounding.ROUND_HALF_UP),Number.isInteger(t)||n(!1),t>0||n(!1),V.set({precision:t+1,rounding:Y[r]});var o=new V(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(t);return o.toFormat(o.decimalPlaces(),e)},e.toFixed=function(t,e,r){return void 0===e&&(e={groupSeparator:""}),void 0===r&&(r=exports.Rounding.ROUND_HALF_UP),Number.isInteger(t)||n(!1),t>=0||n(!1),G.DP=t,G.RM=z[r],new G(this.numerator.toString()).div(this.denominator.toString()).toFormat(t,e)},F(t,[{key:"quotient",get:function(){return r.divide(this.numerator,this.denominator)}},{key:"remainder",get:function(){return new t(r.remainder(this.numerator,this.denominator),this.denominator)}},{key:"asFraction",get:function(){return new t(this.numerator,this.denominator)}}])}(),$=new Z(r.BigInt(100));function Q(t){return new J(t.numerator,t.denominator)}var J=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).isPercent=!0,e}D(e,t);var r=e.prototype;return r.add=function(e){return Q(t.prototype.add.call(this,e))},r.subtract=function(e){return Q(t.prototype.subtract.call(this,e))},r.multiply=function(e){return Q(t.prototype.multiply.call(this,e))},r.divide=function(e){return Q(t.prototype.divide.call(this,e))},r.toSignificant=function(e,r,n){return void 0===e&&(e=5),t.prototype.multiply.call(this,$).toSignificant(e,r,n)},r.toFixed=function(e,r,n){return void 0===e&&(e=2),t.prototype.multiply.call(this,$).toFixed(e,r,n)},e}(Z),K=new J(q),tt=new J(x),et=u(i),rt=function(t){function e(e,o,i){var u;return u=t.call(this,o,i)||this,r.lessThanOrEqual(u.quotient,A)||n(!1),u.currency=e,u.decimalScale=r.exponentiate(r.BigInt(10),r.BigInt(e.decimals)),u}D(e,t),e.fromRawAmount=function(t,r){return new e(t,r)},e.fromFractionalAmount=function(t,r,n){return new e(t,r,n)};var o=e.prototype;return o.add=function(r){this.currency.equals(r.currency)||n(!1);var o=t.prototype.add.call(this,r);return e.fromFractionalAmount(this.currency,o.numerator,o.denominator)},o.subtract=function(r){this.currency.equals(r.currency)||n(!1);var o=t.prototype.subtract.call(this,r);return e.fromFractionalAmount(this.currency,o.numerator,o.denominator)},o.multiply=function(r){var n=t.prototype.multiply.call(this,r);return e.fromFractionalAmount(this.currency,n.numerator,n.denominator)},o.divide=function(r){var n=t.prototype.divide.call(this,r);return e.fromFractionalAmount(this.currency,n.numerator,n.denominator)},o.toSignificant=function(e,r,n){return void 0===e&&(e=6),void 0===n&&(n=exports.Rounding.ROUND_DOWN),t.prototype.divide.call(this,this.decimalScale).toSignificant(e,r,n)},o.toFixed=function(e,r,o){return void 0===e&&(e=this.currency.decimals),void 0===o&&(o=exports.Rounding.ROUND_DOWN),e<=this.currency.decimals||n(!1),t.prototype.divide.call(this,this.decimalScale).toFixed(e,r,o)},o.toExact=function(t){return void 0===t&&(t={groupSeparator:""}),et.DP=this.currency.decimals,new et(this.quotient.toString()).div(this.decimalScale.toString()).toFormat(t)},F(e,[{key:"wrapped",get:function(){return this.currency.isToken?this:e.fromFractionalAmount(this.currency.wrapped,this.numerator,this.denominator)}}])}(Z),nt=function(t){function e(){for(var e,n,o,i,u,a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];if(4===s.length)n=s[0],o=s[1],i=s[2],u=s[3];else{var l=s[0].quoteAmount.divide(s[0].baseAmount),p=[s[0].baseAmount.currency,s[0].quoteAmount.currency,l.denominator,l.numerator];n=p[0],o=p[1],i=p[2],u=p[3]}return(e=t.call(this,u,i)||this).baseCurrency=n,e.quoteCurrency=o,e.scalar=new Z(r.exponentiate(r.BigInt(10),r.BigInt(n.decimals)),r.exponentiate(r.BigInt(10),r.BigInt(o.decimals))),e}D(e,t);var o=e.prototype;return o.invert=function(){return new e(this.quoteCurrency,this.baseCurrency,this.numerator,this.denominator)},o.multiply=function(r){this.quoteCurrency.equals(r.baseCurrency)||n(!1);var o=t.prototype.multiply.call(this,r);return new e(this.baseCurrency,r.quoteCurrency,o.denominator,o.numerator)},o.quote=function(e){e.currency.equals(this.baseCurrency)||n(!1);var r=t.prototype.multiply.call(this,e);return rt.fromFractionalAmount(this.quoteCurrency,r.numerator,r.denominator)},o.toSignificant=function(t,e,r){return void 0===t&&(t=6),this.adjustedForDecimals.toSignificant(t,e,r)},o.toFixed=function(t,e,r){return void 0===t&&(t=4),this.adjustedForDecimals.toFixed(t,e,r)},F(e,[{key:"adjustedForDecimals",get:function(){return t.prototype.multiply.call(this,this.scalar)}}])}(Z),ot=function(t,e,r,o){Number.isSafeInteger(t)||n(!1),e>=0&&e<255&&Number.isInteger(e)||n(!1),this.chainId=t,this.decimals=e,this.symbol=r,this.name=o},it=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).isNative=!0,e.isToken=!1,e}return D(e,t),e}(ot);function ut(t){try{return s.getAddress(t)}catch(e){throw new Error(t+" is not a valid address.")}}var at=/^0x[0-9a-fA-F]{40}$/;function st(t){if(at.test(t))return t;throw new Error(t+" is not a valid address.")}var ct,lt=function(t){function e(e,r,o,i,u,s,c,l){var p;return(p=t.call(this,e,o,i,u)||this).isNative=!1,p.isToken=!0,p.address=s?st(r):ut(r),c&&(c.gte(a.BigNumber.from(0))||n(!1)),l&&(l.gte(a.BigNumber.from(0))||n(!1)),p.buyFeeBps=c,p.sellFeeBps=l,p}D(e,t);var r=e.prototype;return r.equals=function(t){return t.isToken&&this.chainId===t.chainId&&this.address.toLowerCase()===t.address.toLowerCase()},r.sortsBefore=function(t){return this.chainId!==t.chainId&&n(!1),this.address.toLowerCase()===t.address.toLowerCase()&&n(!1),this.address.toLowerCase()<t.address.toLowerCase()},F(e,[{key:"wrapped",get:function(){return this}}])}(ot),pt=((ct={})[exports.ChainId.SEPOLIA]=new lt(exports.ChainId.SEPOLIA,"0xfFf9976782d46CC05630D1f6eBAb18b2324d6B14",18,"WETH","Wrapped Ether"),ct),ft=function(t){function e(e){return t.call(this,e,18,"ETH","Ether")||this}return D(e,t),e.onChain=function(t){var r;return null!=(r=this._etherCache[t])?r:this._etherCache[t]=new e(t)},e.prototype.equals=function(t){return t.isNative&&t.chainId===this.chainId},F(e,[{key:"wrapped",get:function(){var t=pt[this.chainId];return t||n(!1),t}}])}(it);ft._etherCache={};var ht=r.BigInt(Number.MAX_SAFE_INTEGER),dt=r.BigInt(0),mt=r.BigInt(1),vt=r.BigInt(2);function yt(t){if(r.greaterThanOrEqual(t,dt)||n(!1),r.lessThan(t,ht))return r.BigInt(Math.floor(Math.sqrt(r.toNumber(t))));var e,o;for(e=t,o=r.add(r.divide(t,vt),mt);r.lessThan(o,e);)e=o,o=r.divide(r.add(r.divide(t,o),o),vt);return e}var gt="setPrototypeOf"in Object,Tt=function(t){function e(){var r;return(r=t.call(this)||this).isInsufficientReservesError=!0,r.name=r.constructor.name,gt&&Object.setPrototypeOf(r,(this instanceof e?this.constructor:void 0).prototype),r}return D(e,t),e}(W(Error)),At=function(t){function e(){var r;return(r=t.call(this)||this).isInsufficientInputAmountError=!0,r.name=r.constructor.name,gt&&Object.setPrototypeOf(r,(this instanceof e?this.constructor:void 0).prototype),r}return D(e,t),e}(W(Error)),wt=function(t){var e=t.factoryAddress,r=t.tokenA,n=t.tokenB,o=r.sortsBefore(n)?[r,n]:[n,r];return s.getCreate2Address(e,c.keccak256(["bytes"],[c.pack(["address","address"],[o[0].address,o[1].address])]),I)},It=function(){function t(e,r){var n=e.currency.sortsBefore(r.currency)?[e,r]:[r,e];this.liquidityToken=new lt(n[0].currency.chainId,t.getAddress(n[0].currency,n[1].currency),18,"UNI-V2","Uniswap V2"),this.tokenAmounts=n}t.getAddress=function(t,e){var r=w[t.chainId];return r||n(!1),wt({factoryAddress:r,tokenA:t,tokenB:e})};var e=t.prototype;return e.involvesToken=function(t){return t.equals(this.token0)||t.equals(this.token1)},e.priceOf=function(t){return this.involvesToken(t)||n(!1),t.equals(this.token0)?this.token0Price:this.token1Price},e.reserveOf=function(t){return this.involvesToken(t)||n(!1),t.equals(this.token0)?this.reserve0:this.reserve1},e.getOutputAmount=function(e,o){if(void 0===o&&(o=!0),this.involvesToken(e.currency)||n(!1),r.equal(this.reserve0.quotient,q)||r.equal(this.reserve1.quotient,q))throw new Tt;var i=this.reserveOf(e.currency),u=this.reserveOf(e.currency.equals(this.token0)?this.token1:this.token0),a=o?this.derivePercentAfterSellFees(e):K,s=a.greaterThan(K)?rt.fromRawAmount(e.currency,a.multiply(e).quotient):e,c=r.multiply(s.quotient,O),l=r.multiply(c,u.quotient),p=r.add(r.multiply(i.quotient,b),c),f=rt.fromRawAmount(e.currency.equals(this.token0)?this.token1:this.token0,r.divide(l,p));if(r.equal(f.quotient,q))throw new At;var h=o?this.derivePercentAfterBuyFees(f):K,d=h.greaterThan(K)?rt.fromRawAmount(f.currency,f.multiply(h).quotient):f;if(r.equal(d.quotient,q))throw new At;return[d,new t(i.add(s),u.subtract(d))]},e.getInputAmount=function(e,o){void 0===o&&(o=!0),this.involvesToken(e.currency)||n(!1);var i=o?this.derivePercentAfterBuyFees(e):K,u=i.greaterThan(K)?rt.fromRawAmount(e.currency,r.add(e.divide(i).quotient,x)):e;if(r.equal(this.reserve0.quotient,q)||r.equal(this.reserve1.quotient,q)||r.greaterThanOrEqual(e.quotient,this.reserveOf(e.currency).quotient)||r.greaterThanOrEqual(u.quotient,this.reserveOf(e.currency).quotient))throw new Tt;var a=this.reserveOf(e.currency),s=this.reserveOf(e.currency.equals(this.token0)?this.token1:this.token0),c=r.multiply(r.multiply(s.quotient,u.quotient),b),l=r.multiply(r.subtract(a.quotient,u.quotient),O),p=rt.fromRawAmount(e.currency.equals(this.token0)?this.token1:this.token0,r.add(r.divide(c,l),x)),f=o?this.derivePercentAfterSellFees(p):K;return[f.greaterThan(K)?rt.fromRawAmount(p.currency,r.add(p.divide(f).quotient,x)):p,new t(s.add(p),a.subtract(e))]},e.getLiquidityMinted=function(t,e,o){t.currency.equals(this.liquidityToken)||n(!1);var i,u=e.currency.sortsBefore(o.currency)?[e,o]:[o,e];if(u[0].currency.equals(this.token0)&&u[1].currency.equals(this.token1)||n(!1),r.equal(t.quotient,q))i=r.subtract(yt(r.multiply(u[0].quotient,u[1].quotient)),P);else{var a=r.divide(r.multiply(u[0].quotient,t.quotient),this.reserve0.quotient),s=r.divide(r.multiply(u[1].quotient,t.quotient),this.reserve1.quotient);i=r.lessThanOrEqual(a,s)?a:s}if(!r.greaterThan(i,q))throw new At;return rt.fromRawAmount(this.liquidityToken,i)},e.getLiquidityValue=function(t,e,o,i,u){var a;if(void 0===i&&(i=!1),this.involvesToken(t)||n(!1),e.currency.equals(this.liquidityToken)||n(!1),o.currency.equals(this.liquidityToken)||n(!1),r.lessThanOrEqual(o.quotient,e.quotient)||n(!1),i){u||n(!1);var s=r.BigInt(u);if(r.equal(s,q))a=e;else{var c=yt(r.multiply(this.reserve0.quotient,this.reserve1.quotient)),l=yt(s);if(r.greaterThan(c,l)){var p=r.multiply(e.quotient,r.subtract(c,l)),f=r.add(r.multiply(c,k),l),h=r.divide(p,f);a=e.add(rt.fromRawAmount(this.liquidityToken,h))}else a=e}}else a=e;return rt.fromRawAmount(t,r.divide(r.multiply(o.quotient,this.reserveOf(t).quotient),a.quotient))},e.derivePercentAfterSellFees=function(t){var e=this.token0.wrapped.equals(t.wrapped.currency)?this.token0.wrapped.sellFeeBps:this.token1.wrapped.sellFeeBps;return null!=e&&e.gt(a.BigNumber.from(0))?tt.subtract(new J(r.BigInt(e)).divide(E)):K},e.derivePercentAfterBuyFees=function(t){var e=this.token0.wrapped.equals(t.wrapped.currency)?this.token0.wrapped.buyFeeBps:this.token1.wrapped.buyFeeBps;return null!=e&&e.gt(a.BigNumber.from(0))?tt.subtract(new J(r.BigInt(e)).divide(E)):K},F(t,[{key:"token0Price",get:function(){var t=this.tokenAmounts[1].divide(this.tokenAmounts[0]);return new nt(this.token0,this.token1,t.denominator,t.numerator)}},{key:"token1Price",get:function(){var t=this.tokenAmounts[0].divide(this.tokenAmounts[1]);return new nt(this.token1,this.token0,t.denominator,t.numerator)}},{key:"chainId",get:function(){return this.token0.chainId}},{key:"token0",get:function(){return this.tokenAmounts[0].currency}},{key:"token1",get:function(){return this.tokenAmounts[1].currency}},{key:"reserve0",get:function(){return this.tokenAmounts[0]}},{key:"reserve1",get:function(){return this.tokenAmounts[1]}}])}(),Pt=function(){return F((function(t,e,r){this._midPrice=null,t.length>0||n(!1);var o=t[0].chainId;t.every((function(t){return t.chainId===o}))||n(!1);var i=e.wrapped;t[0].involvesToken(i)||n(!1),void 0===r||t[t.length-1].involvesToken(r.wrapped)||n(!1);for(var u,a=[i],s=N(t.entries());!(u=s()).done;){var c=u.value,l=c[1],p=a[c[0]];p.equals(l.token0)||p.equals(l.token1)||n(!1);var f=p.equals(l.token0)?l.token1:l.token0;a.push(f)}this.pairs=t,this.path=a,this.input=e,this.output=r}),[{key:"midPrice",get:function(){if(null!==this._midPrice)return this._midPrice;for(var t,e=[],r=N(this.pairs.entries());!(t=r()).done;){var n=t.value,o=n[1];e.push(this.path[n[0]].equals(o.token0)?new nt(o.reserve0.currency,o.reserve1.currency,o.reserve0.quotient,o.reserve1.quotient):new nt(o.reserve1.currency,o.reserve0.currency,o.reserve1.quotient,o.reserve0.quotient))}var i=e.slice(1).reduce((function(t,e){return t.multiply(e)}),e[0]);return this._midPrice=new nt(this.input,this.output,i.denominator,i.numerator)}},{key:"chainId",get:function(){return this.pairs[0].chainId}}])}();function qt(t,e,r){var n=t.quote(e),o=n.subtract(r).divide(n);return new J(o.numerator,o.denominator)}function xt(t,e,r,o){if(r>0||n(!1),t.length<=r||n(!1),0===t.length)return t.push(e),null;var i=t.length===r;if(i&&o(t[t.length-1],e)<=0)return e;for(var u=0,a=t.length;u<a;){var s=u+a>>>1;o(t[s],e)<=0?u=s+1:a=s}return t.splice(u,0,e),i?t.pop():null}function kt(t,e){return t.inputAmount.currency.equals(e.inputAmount.currency)||n(!1),t.outputAmount.currency.equals(e.outputAmount.currency)||n(!1),t.outputAmount.equalTo(e.outputAmount)?t.inputAmount.equalTo(e.inputAmount)?0:t.inputAmount.lessThan(e.inputAmount)?-1:1:t.outputAmount.lessThan(e.outputAmount)?1:-1}function Ot(t,e){var r=kt(t,e);return 0!==r?r:t.priceImpact.lessThan(e.priceImpact)?-1:t.priceImpact.greaterThan(e.priceImpact)?1:t.route.path.length-e.route.path.length}var bt=function(){function t(t,e,r){this.route=t,this.tradeType=r;var o=new Array(t.path.length);if(r===exports.TradeType.EXACT_INPUT){e.currency.equals(t.input)||n(!1),o[0]=e.wrapped;for(var i=0;i<t.path.length-1;i++){var u=t.pairs[i].getOutputAmount(o[i]);o[i+1]=u[0]}this.inputAmount=rt.fromFractionalAmount(t.input,e.numerator,e.denominator),this.outputAmount=rt.fromFractionalAmount(t.output,o[o.length-1].numerator,o[o.length-1].denominator)}else{e.currency.equals(t.output)||n(!1),o[o.length-1]=e.wrapped;for(var a=t.path.length-1;a>0;a--){var s=t.pairs[a-1].getInputAmount(o[a]);o[a-1]=s[0]}this.inputAmount=rt.fromFractionalAmount(t.input,o[0].numerator,o[0].denominator),this.outputAmount=rt.fromFractionalAmount(t.output,e.numerator,e.denominator)}this.executionPrice=new nt(this.inputAmount.currency,this.outputAmount.currency,this.inputAmount.quotient,this.outputAmount.quotient),this.priceImpact=qt(t.midPrice,this.inputAmount,this.outputAmount)}t.exactIn=function(e,r){return new t(e,r,exports.TradeType.EXACT_INPUT)},t.exactOut=function(e,r){return new t(e,r,exports.TradeType.EXACT_OUTPUT)};var e=t.prototype;return e.minimumAmountOut=function(t){if(t.lessThan(q)&&n(!1),this.tradeType===exports.TradeType.EXACT_OUTPUT)return this.outputAmount;var e=new Z(x).add(t).invert().multiply(this.outputAmount.quotient).quotient;return rt.fromRawAmount(this.outputAmount.currency,e)},e.maximumAmountIn=function(t){if(t.lessThan(q)&&n(!1),this.tradeType===exports.TradeType.EXACT_INPUT)return this.inputAmount;var e=new Z(x).add(t).multiply(this.inputAmount.quotient).quotient;return rt.fromRawAmount(this.inputAmount.currency,e)},t.bestTradeExactIn=function(e,r,o,i,u,a,s){var c=void 0===i?{}:i,l=c.maxNumResults,p=void 0===l?3:l,f=c.maxHops,h=void 0===f?3:f;void 0===u&&(u=[]),void 0===a&&(a=r),void 0===s&&(s=[]),e.length>0||n(!1),h>0||n(!1),r===a||u.length>0||n(!1);for(var d=a.wrapped,m=o.wrapped,v=0;v<e.length;v++){var y=e[v];if((y.token0.equals(d.currency)||y.token1.equals(d.currency))&&!y.reserve0.equalTo(q)&&!y.reserve1.equalTo(q)){var g=void 0;try{g=y.getOutputAmount(d)[0]}catch(t){if(t.isInsufficientInputAmountError)continue;throw t}if(g.currency.equals(m))xt(s,new t(new Pt([].concat(u,[y]),r.currency,o),r,exports.TradeType.EXACT_INPUT),p,Ot);else if(h>1&&e.length>1){var T=e.slice(0,v).concat(e.slice(v+1,e.length));t.bestTradeExactIn(T,r,o,{maxNumResults:p,maxHops:h-1},[].concat(u,[y]),g,s)}}}return s},e.worstExecutionPrice=function(t){return new nt(this.inputAmount.currency,this.outputAmount.currency,this.maximumAmountIn(t).quotient,this.minimumAmountOut(t).quotient)},t.bestTradeExactOut=function(e,r,o,i,u,a,s){var c=void 0===i?{}:i,l=c.maxNumResults,p=void 0===l?3:l,f=c.maxHops,h=void 0===f?3:f;void 0===u&&(u=[]),void 0===a&&(a=o),void 0===s&&(s=[]),e.length>0||n(!1),h>0||n(!1),o===a||u.length>0||n(!1);for(var d=a.wrapped,m=r.wrapped,v=0;v<e.length;v++){var y=e[v];if((y.token0.equals(d.currency)||y.token1.equals(d.currency))&&!y.reserve0.equalTo(q)&&!y.reserve1.equalTo(q)){var g=void 0;try{g=y.getInputAmount(d)[0]}catch(t){if(t.isInsufficientReservesError)continue;throw t}if(g.currency.equals(m))xt(s,new t(new Pt([y].concat(u),r,o.currency),o,exports.TradeType.EXACT_OUTPUT),p,Ot);else if(h>1&&e.length>1){var T=e.slice(0,v).concat(e.slice(v+1,e.length));t.bestTradeExactOut(T,r,o,{maxNumResults:p,maxHops:h-1},[y].concat(u),g,s)}}}return s},t}();function Et(t,e){t===e&&n(!1);var r=t.toLowerCase()<e.toLowerCase()?[t,e]:[e,t],o=r[0],i=r[1];return"0x0000000000000000000000000000000000000000"===o.toLowerCase()&&n(!1),[o,i]}function Bt(t,e,o){r.greaterThan(t,r.BigInt(0))||n(!1),r.greaterThan(e,r.BigInt(0))&&r.greaterThan(o,r.BigInt(0))||n(!1);var i=r.multiply(t,r.BigInt(997)),u=r.multiply(i,o),a=r.add(r.multiply(e,r.BigInt(1e3)),i);return r.divide(u,a)}function St(t,e,o){r.greaterThan(t,r.BigInt(0))||n(!1),r.greaterThan(e,r.BigInt(0))&&r.greaterThan(o,r.BigInt(0))||n(!1);var i=r.multiply(r.multiply(e,t),r.BigInt(1e3)),u=r.multiply(r.subtract(o,t),r.BigInt(997));return r.add(r.divide(i,u),r.BigInt(1))}function _t(t,e,o,i){r.greaterThan(t,r.BigInt(0))&&r.greaterThan(e,r.BigInt(0))||n(!1),r.greaterThan(o,r.BigInt(0))&&r.greaterThan(i,r.BigInt(0))||n(!1);var u=r.divide(r.multiply(i,t),o),a=r.greaterThan(u,e);if(r.equal(u,e))return[!1,r.BigInt(0)];var s=r.multiply(o,i);try{var c=yt(r.divide(r.multiply(r.multiply(s,r.BigInt(1e3)),a?t:e),r.multiply(a?e:t,r.BigInt(997)))),l=r.divide(r.multiply(a?o:i,r.BigInt(1e3)),r.BigInt(997));return r.lessThan(c,l)?[!1,r.BigInt(0)]:[a,r.subtract(c,l)]}catch(t){return[!1,r.BigInt(0)]}}function Rt(t,e,o,i){r.greaterThan(t,r.BigInt(0))&&r.greaterThan(e,r.BigInt(0))||n(!1);var u=_t(o,i,t,e),a=u[0],s=u[1];if(r.equal(s,r.BigInt(0)))return[t,e];if(a){var c=Bt(s,t,e);return[r.add(t,s),r.subtract(e,c)]}var l=Bt(s,e,t);return[r.subtract(t,l),r.add(e,s)]}function Ut(t,e,n,o,i,u){var a=n;if(i&&r.greaterThan(u,r.BigInt(0))){var s=yt(r.multiply(t,e)),c=yt(u);if(r.greaterThan(s,c)){var l=n,p=r.subtract(s,c),f=r.add(r.multiply(s,r.BigInt(5)),c),h=r.divide(r.multiply(l,p),f);a=r.add(n,h)}}return[r.divide(r.multiply(t,o),a),r.divide(r.multiply(e,o),a)]}var Ft=function(){function t(){this.userPools=new Map,this.userBalances=new Map,this.poolData=new Map}var e=t.prototype;return e.addMockUserPosition=function(t,e,r){t=st(t),e=st(e),this.userPools.has(t)||this.userPools.set(t,new Set),this.userPools.get(t).add(e),this.userBalances.has(t)||this.userBalances.set(t,new Map),this.userBalances.get(t).set(e,r)},e.addMockPoolData=function(t,e,r,n,o,i){this.poolData.set(st(t),{tokenA:st(e),tokenB:st(r),reserveA:n,reserveB:o,totalSupply:i})},e.getUserLPPoolCount=function(){var t=_(j().m((function t(e){var n;return j().w((function(t){for(;;)switch(t.n){case 0:return e=st(e),n=this.userPools.get(e),t.a(2,r.BigInt(n?n.size:0))}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getUserLPPools=function(){var t=_(j().m((function t(e,n,o){var i,u,a,s,c;return j().w((function(t){for(;;)switch(t.n){case 0:if(e=st(e),i=this.userPools.get(e)){t.n=1;break}return t.a(2,{pools:[],hasMore:!1});case 1:return u=Array.from(i),a=r.toNumber(n),s=r.toNumber(o),c=u.slice(a,a+s),t.a(2,{pools:c,hasMore:a+s<u.length})}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),e.getUserLPBalance=function(){var t=_(j().m((function t(e,n){var o;return j().w((function(t){for(;;)switch(t.n){case 0:if(e=st(e),n=st(n),o=this.userBalances.get(e)){t.n=1;break}return t.a(2,r.BigInt(0));case 1:return t.a(2,o.get(n)||r.BigInt(0))}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.getUserLPPositions=function(){var t=_(j().m((function t(e,n,o){var i,u,a,s,c,l,p,f;return j().w((function(t){for(;;)switch(t.n){case 0:return e=st(e),t.n=1,this.getUserLPPools(e,n,o);case 1:u=[],a=N((i=t.v).pools);case 2:if((s=a()).done){t.n=6;break}return c=s.value,t.n=3,this.getUserLPBalance(e,c);case 3:return l=t.v,t.n=4,this.getPoolInfo(c);case 4:f=r.equal((p=t.v).totalSupply,r.BigInt(0))?r.BigInt(0):r.divide(r.multiply(l,r.BigInt(1e4)),p.totalSupply),u.push({pool:c,tokenA:p.tokenA,tokenB:p.tokenB,balance:l,reserveA:p.reserveA,reserveB:p.reserveB,totalSupply:p.totalSupply,sharePercentage:f});case 5:t.n=2;break;case 6:return t.a(2,{positions:u,hasMore:i.hasMore})}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),e.hasLPPosition=function(){var t=_(j().m((function t(e,n){return j().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,this.getUserLPBalance(e,n);case 1:return t.a(2,r.greaterThan(t.v,r.BigInt(0)))}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.getPoolInfo=function(){var t=_(j().m((function t(e){var r;return j().w((function(t){for(;;)switch(t.n){case 0:if(e=st(e),r=this.poolData.get(e)){t.n=1;break}throw new Error("Pool data not found for "+e);case 1:return t.a(2,r)}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),t}(),Nt=function(){function t(t){this.dataProvider=t}var e=t.prototype;return e.getUserLPPoolCount=function(){var t=_(j().m((function t(e){return j().w((function(t){for(;;)switch(t.n){case 0:return t.a(2,this.dataProvider.getUserLPPoolCount(e))}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getUserLPPools=function(){var t=_(j().m((function t(e,o,i){return j().w((function(t){for(;;)switch(t.n){case 0:return r.greaterThanOrEqual(o,r.BigInt(0))||n(!1),r.greaterThan(i,r.BigInt(0))||n(!1),t.a(2,this.dataProvider.getUserLPPools(e,o,i))}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),e.getUserLPBalance=function(){var t=_(j().m((function t(e,r){return j().w((function(t){for(;;)switch(t.n){case 0:return t.a(2,this.dataProvider.getUserLPBalance(e,r))}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.getUserLPPositions=function(){var t=_(j().m((function t(e,o,i){return j().w((function(t){for(;;)switch(t.n){case 0:return r.greaterThanOrEqual(o,r.BigInt(0))||n(!1),r.greaterThan(i,r.BigInt(0))||n(!1),t.a(2,this.dataProvider.getUserLPPositions(e,o,i))}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),e.hasLPPosition=function(){var t=_(j().m((function t(e,r){return j().w((function(t){for(;;)switch(t.n){case 0:return t.a(2,this.dataProvider.hasLPPosition(e,r))}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.getAllUserLPPositions=function(){var t=_(j().m((function t(e){var n,o,i,u;return j().w((function(t){for(;;)switch(t.n){case 0:n=[],o=r.BigInt(0),i=r.BigInt(50);case 1:return t.n=2,this.getUserLPPositions(e,o,i);case 2:if(n.push.apply(n,(u=t.v).positions),u.hasMore){t.n=3;break}return t.a(3,4);case 3:o=r.add(o,i),t.n=1;break;case 4:return t.a(2,n)}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getUserTotalLPValue=function(){var t=_(j().m((function t(e){var r,n;return j().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,this.getAllUserLPPositions(e);case 1:return r=t.v,n=new Set(r.map((function(t){return t.pool}))),t.a(2,{totalPositions:r.length,totalPools:n.size})}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),t}();function Ct(t){return"0x"+t.quotient.toString(16)}var Dt=function(){function t(){}return t.swapCallParameters=function(t,e){var r=t.inputAmount.currency.isNative,o=t.outputAmount.currency.isNative;r&&o&&n(!1),!("ttl"in e)||e.ttl>0||n(!1);var i,u,a,s=ut(e.recipient),c=Ct(t.maximumAmountIn(e.allowedSlippage)),l=Ct(t.minimumAmountOut(e.allowedSlippage)),p=t.route.path.map((function(t){return t.address})),f="ttl"in e?"0x"+(Math.floor((new Date).getTime()/1e3)+e.ttl).toString(16):"0x"+e.deadline.toString(16),h=Boolean(e.feeOnTransfer);switch(t.tradeType){case exports.TradeType.EXACT_INPUT:r?(i=h?"swapExactETHForTokensSupportingFeeOnTransferTokens":"swapExactETHForTokens",u=[l,p,s,f],a=c):o?(i=h?"swapExactTokensForETHSupportingFeeOnTransferTokens":"swapExactTokensForETH",u=[c,l,p,s,f],a="0x0"):(i=h?"swapExactTokensForTokensSupportingFeeOnTransferTokens":"swapExactTokensForTokens",u=[c,l,p,s,f],a="0x0");break;case exports.TradeType.EXACT_OUTPUT:h&&n(!1),r?(i="swapETHForExactTokens",u=[l,p,s,f],a=c):o?(i="swapTokensForExactETH",u=[l,c,p,s,f],a="0x0"):(i="swapTokensForExactTokens",u=[l,c,p,s,f],a="0x0")}return{methodName:i,args:u,value:a}},t}();exports.BASIS_POINTS=E,exports.CurrencyAmount=rt,exports.Ether=ft,exports.FACTORY_ADDRESSES=v,exports.FACTORY_ADDRESS_MAP=w,exports.FIVE=k,exports.Fraction=Z,exports.INIT_CODE_HASH=I,exports.InsufficientInputAmountError=At,exports.InsufficientReservesError=Tt,exports.LPPositionTracker=Nt,exports.MINIMUM_LIQUIDITY=P,exports.MaxUint256=A,exports.MockLPDataProvider=Ft,exports.NativeCurrency=it,exports.ONE=x,exports.ONE_HUNDRED_PERCENT=tt,exports.Pair=It,exports.Percent=J,exports.Price=nt,exports.ROUTER_ADDRESSES=y,exports.Route=Pt,exports.Router=Dt,exports.SUPPORTED_CHAINS=h,exports.Token=lt,exports.Trade=bt,exports.WETH9=pt,exports.ZERO=q,exports.ZERO_PERCENT=K,exports._1000=b,exports._997=O,exports.computeLiquidityValue=Ut,exports.computePairAddress=wt,exports.computePriceImpact=qt,exports.computeProfitMaximizingTrade=_t,exports.getAmountIn=St,exports.getAmountOut=Bt,exports.getAmountsIn=function(t,e){e.length>=1||n(!1);var r=new Array(e.length+1);r[r.length-1]=t;for(var o=e.length-1;o>=0;o--)r[o]=St(r[o+1],e[o][0],e[o][1]);return r},exports.getAmountsOut=function(t,e){e.length>=1||n(!1);var r=new Array(e.length+1);r[0]=t;for(var o=0;o<e.length;o++)r[o+1]=Bt(r[o],e[o][0],e[o][1]);return r},exports.getFactoryAddress=function(t){return v[t]},exports.getLiquidityValue=function(t,e){return Ut(t.reserveA,t.reserveB,t.totalSupply,e,t.feeOn,t.kLast)},exports.getLiquidityValueAfterArbitrageToPrice=function(t,e,o,i){r.greaterThanOrEqual(t.totalSupply,i)&&r.greaterThan(i,r.BigInt(0))||n(!1);var u=Rt(t.reserveA,t.reserveB,e,o);return Ut(u[0],u[1],t.totalSupply,i,t.feeOn,t.kLast)},exports.getReservesAfterArbitrage=Rt,exports.getRouterAddress=function(t){return y[t]},exports.inputOutputComparator=kt,exports.pairFor=function(t,e,r,n){var o=Et(e,r);return"0x"+(t+o[0]+o[1]+n).slice(-40).padStart(40,"0")},exports.quote=function(t,e,o){return r.greaterThan(t,r.BigInt(0))||n(!1),r.greaterThan(e,r.BigInt(0))&&r.greaterThan(o,r.BigInt(0))||n(!1),r.divide(r.multiply(t,o),e)},exports.setFactoryAddress=function(t,e){v[t]=e},exports.setRouterAddress=function(t,e){y[t]=e},exports.sortTokens=Et,exports.sortedInsert=xt,exports.sqrt=yt,exports.tradeComparator=Ot,exports.validateAndParseAddress=ut;
//# sourceMappingURL=uniswap-v2-sdk-core.cjs.production.min.js.map
